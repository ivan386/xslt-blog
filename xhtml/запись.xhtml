<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<!-- если элемент <заголовок> будет пуст то в title будет этот текст -->
		<title class="заголовок">Простой блог на XML</title>
		<meta  class="срез"/>
		<!-- поскольку стиль маленький он включён в HTML -->
		<style>
			/* делаем использование xHTML необязательным в тексте */
			
			.текст{
				white-space: pre-wrap;
			}
			
			/* чтобы небыло больших отступов инлайним заголовки */
			
			  .текст h1, .текст h2
			, .текст h3, .текст h4
			, .текст h5, .текст h6 {
				display: inline;
			}

			.update_journal[href=""]{
				display: none;
			}
		</style>
		<script><![CDATA[
			function save_xml(){
				var title = document.querySelector(".заголовок input").value
				var text = document.querySelector(".текст textarea").value
				var link_save = document.querySelector(".текст a[onclick='save_xml()']")
				link_save.setAttribute("download", title + ".xml")
				link_save.setAttribute(
					"href"
					,   'data: text/xml,' 
					  + encodeURI(
`<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="xslt/запись.xslt" type="text/xsl" ?>
<запись>
	<заголовок>${title}</заголовок>
	<текст>${text}</текст>
</запись>`
					)
				)
				
				var link_update = document.querySelector(".текст a.update_journal")
				link_update.setAttribute("href", '')
				
				fetch("журнал.xml")
				.then((rez)=>rez.text())
				.then(function(text){
					text = text.replace("<журнал>", `<журнал>\n\t<запись>${title}</запись>`)
					link_update.setAttribute("href", 'data: text/xml,' + encodeURI(text))
				})
			}
		]]></script>
	</head>
	<body>
		<!-- надеюсь по именам классов понятно что будет в этих элементах -->
		<ul   class="навигация" />
		<h1   class="заголовок" ><input id="title" placeholder="Введите заголовок новой записи" style="font: inherit; width: 100%;"/></h1>
		<span class="текст"><a onclick="save_xml()" oncontextmenu="save_xml()" href="#">сохранить запись</a> <a class="update_journal" href="" download="журнал.xml">обновить журнал</a>
<textarea
	placeholder="Введите текст новой записи."
	style="font: inherit; width: 100%; height: 100vh"
></textarea></span>
	</body>
</html>